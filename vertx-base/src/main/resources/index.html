<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div id="avg"></div>
<div id="main"></div>

<script language="JavaScript">
  const sse = new EventSource("/sse");
  const avg = document.getElementById("avg");
  const main = document.getElementById("main");

  sse.addEventListener("update", function (event) {
    const data = JSON.parse(event.data);
    var div = document.getElementById(data.id);
    if(div === null){
      var div = document.createElement("div");
      div.setAttribute("id", data.id);
      main.appendChild(div);
    }
    div.innerHTML = `<strong>${data.temp.toFixed(2)}</strong> (<em>${data.id}</em>)`

  });

  sse.addEventListener("average", function (event) {
    const data = JSON.parse(event.data);
    avg.innerText = `Average: ${data.average.toFixed(2)}`
  });

</script>
</body>
</html>